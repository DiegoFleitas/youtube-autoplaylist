javascript:(function(){try{var%20exists=document.getElementById('diegoiframecontainer');if(exists!=null){var%20c=document.getElementById('diegoiframecontainer');c.hidden=false;if(src!=null)loadPlaylist(src);console.log('already%20running');}else{var%20loader=document.createElement('div');loader.setAttribute('id','diegoloader');loader.setAttribute('style','position:absolute;left:50%;top:50%;z-index:1;border:10px%20solid%20#f3f3f3;border-top:10px%20solid%20red;border-radius:50%;width:80px;height:80px;animation:diegospin%201s%20linear%20infinite;');var%20mystyle=document.createElement('style');document.head.appendChild(mystyle);mystyle.innerHTML='@keyframes%20diegospin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}';document.body.appendChild(loader);var%20last='';var%20done=false;var%20uniq=[];var%20hrefs=[];var%20links=document.links;for(var%20i=0;i<links.length;i++){hrefs.push(links[i].href);}uniq=hrefs.reduce(function(a,b){if(a.indexOf(b)<0)a.push(b);return%20a;},[]);uniq.filter(function(url){return%20validateYouTubeUrl(url);});var%20dictionary={};var%20ids=[];var%20vid='';var%20regExpt=/t=(\w+)/;for(var%20h=0;h<uniq.length;h++){var%20str=uniq[h];if(str.indexOf('v=')!==-1){vid=str.substr(str.indexOf('v=')+2,11);ids.push(vid);if(str.indexOf('t=')!==-1){dictionary[vid]=str.match(regExpt)[0];}}else%20if(str.indexOf('youtu.be')!==-1){vid=str.substr(str.indexOf('youtu.be/')+9,11);ids.push(vid);if(str.indexOf('t=')!==-1){dictionary[vid]=str.match(regExpt)[0];}}}ids=ids.filter(function(id){return%20id!=='';});for(var%20j=0;j<ids.length;j++){ids[j]=ids[j].substring(0,11);}console.log(ids);console.log(dictionary);var%20count=ids.length;src=ids.join();if(src=='')throw%20new%20Error('No%20videos%20found.');var%20z=document.createElement('div');z.setAttribute('id','diegoiframecontainer');z.setAttribute('style','min-width:100%;min-height:100%;position:fixed;left:25%;top:25%;%20');document.body.appendChild(z);z.style.zIndex=2147483646;var%20y=document.createElement('div');y.setAttribute('id','diegoplayer');z.appendChild(y);var%20tag=document.createElement('script');tag.src='https://www.youtube.com/iframe_api';var%20firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var%20player;window.onYouTubeIframeAPIReady=function(){player=new%20YT.Player('diegoplayer',{height:'360',width:'640',events:{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange,'onError':onError},playerVars:{'autoplay':1,'controls':1,'playlist':[src]}});};var%20iframe=document.getElementById('diegoplayer');iframe.setAttribute('enablejsapi','1');}}catch(ex){loader.parentNode.removeChild(loader);console.log(ex);}function%20validateYouTubeUrl(url){if(url!=undefined||url!=''){var%20regExp=/^.*(youtu.be\/|v\/|u\/\w\/|watch\?v=|\&v=|\?v=)([^%#\&\?]*).*/;var%20match=url.match(regExp);if(match&&match[2].length==11){return%20true;}else{return%20false;}}}function%20onPlayerReady(event){event.target.playVideo();var%20elem=document.getElementById('diegoiframecontainer');var%20group=document.createElement('div');group.setAttribute('id','diegodivgroup');group.setAttribute('style','width:640px;background-color:#0C0C0D;display:table');elem.insertBefore(group,elem.firstChild);var%20divX=document.createElement('div');divX.innerHTML='%E2%9C%96';divX.setAttribute('id','diegodivX');divX.setAttribute('style','margin:0px%2010px;cursor:pointer;color:#F0F0F0;display:inline;vertical-align:top;');group.appendChild(divX);divX.addEventListener('click',Close,false);var%20divP=document.createElement('div');divP.innerHTML='%E2%AE%AB';divP.setAttribute('id','diegodivPlus');divP.setAttribute('style','margin:0px%2010px;cursor:pointer;color:#F0F0F0;display:inline;vertical-align:top;');group.appendChild(divP);divP.addEventListener('click',Go,false);loader.style.display='none';}function%20Go(){var%20url='https://www.youtube.com/watch_videos?video_ids='+src;var%20win=window.open(url,'_blank');win.focus();}function%20Close(){stopVideo();var%20c=document.getElementById('diegoiframecontainer');c.hidden=true;}function%20onPlayerStateChange(event){if(newVideo())done=false;if(event.data==YT.PlayerState.PLAYING&&!done){var%20seconds=getStart();if(seconds>0)seekTo(seconds);done=true;}}function%20getStart(){var%20time=0;var%20id=idFromVideo();var%20stamp=dictionary[id];if(stamp!=null){var%20h,m,s;h=m=s='0';var%20miregex=/t=((\d+)h)?((\d+)m)?(\d+)s/g;hms=miregex.exec(stamp);console.log(hms);hms.forEach(function(element,k){if(element==null)hms[k]=null;});h=Number(hms[2]);m=Number(hms[4]);s=Number(hms[5]);time=(h*3600)+(m*60)+s;}if(stamp){console.log(stamp+'%20is%20'+time)};return%20time;}function%20onError(event){try{var%20code=event.data.toString();switch(code){case'2':console.log('invalid%20parameter%20'+src);break;case'5':console.log('not%20playable%20in%20HTML5%20player');break;case'100':console.log('video%20not%20found');break;case'101':console.log('video%20wont%20play%20in%20embbeded%20players');badVideo();break;case'150':console.log('video%20('+idFromVideo()+')%20wont%20play%20in%20embbeded%20players%20(duplicate)');badVideo();break;default:console.log('unexpected%20error');divX.parentElement.removeChild(divX);iframediv.parentElement.removeChild(iframediv);player.destroy();}}catch(e){console.log(e);}}function%20loadPlaylist(src){var%20diegoplayer=YT.get('diegoplayer');if(diegoplayer!=null)diegoplayer.loadPlaylist(src,0);}function%20idFromVideo(){return%20player.getVideoData().video_id;}function%20newVideo(){var%20now=idFromVideo();if(now!=last){last=now;return%20true;}else%20return%20false;}function%20skipVideo(){player.nextVideo();}function%20stopVideo(){player.stopVideo();}function%20seekTo(seconds){player.seekTo(seconds);}function%20lastVideo(){var%20index=player.getPlaylistIndex();if(index==count-1)return%20true;else%20return%20false;}function%20badVideo(){setTimeout(function(){skipVideo();},5000);}})();
